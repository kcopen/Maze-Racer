<!DOCTYPE html>
<html>
  <head>
	<title>Maze Racer</title>
    <meta name="viewport" width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0>
	
	<link rel="stylesheet" href="style.css">
    
  </head>
  <body>
	
	<script src="p5.min.js"></script>
    <script src="addons/p5.dom.min.js"></script>
	<script src="MazeCell.js"></script>
	<script src="Timer.js"></script>
	<script src="Maze.js"></script>
	<script src="Menu.js"></script>
	<div class="game">
	<script src="sketch.js"></script>
	
    </div>
	<div class="menu">
	Seed:
	<input type="number" id="Seed"  min="1" max="999999999" defaultValue="1234">
	<br>
	
	<button type="button" name="NewGameButton" class="menuButton" onclick="newGame()">New Game</button>
	<br>
	<button type="button" name="ResetGameButton" class="menuButton" onclick="resetGame()">Reset Game</button>
	<br>
	<br>
	<button type="button" name="EasyModeButton" class="menuButton" onclick="easyMode()">Easy Mode</button>
	<br>
	<button type="button" name="MediumModeButton" class="menuButton" onclick="mediumMode()">Medium Mode</button>
	<br>
	<button type="button" name="HardModeButton" class="menuButton" onclick="hardMode()">Hard Mode</button>
	</div>
	<?php
include 'dbconnect.php';

function addUser($username, $password){
	$conn = OpenCon();

	$sql = "INSERT INTO userprofiles (username, password) VALUES ('" . $username . "', '" . $password . "')";
	if ($conn->query($sql) === TRUE)
		echo "It worked";
	else
		echo "It didn't work";
	CloseCon($conn);

}

function addUserRecord($username, $seed, $time){
	$conn = OpenCon();

	$sql = "INSERT INTO userrecords (username, seed, bestTime) VALUES ('" . $username . "', '" . $seed . "', '" . $time . "')";
	if ($conn->query($sql) === TRUE)
		echo "It worked";
	else
		echo "It didn't work";
	CloseCon($conn);
}

function addGlobalRecord($seed, $username, $time){
	$conn = OpenCon();

	$sql = "INSERT INTO seedglobalrecords (seed, username, time) VALUES ('" . $seed . "', '" . $username . "', '" . $time . "')";
	if($conn->query($sql) === FALSE){
		$sql = "UPDATE seedglobalrecords SET username=" . $username . ", time=" . $time . " WHERE seed=" . $seed;
		if ($conn->query($sql) === TRUE)
			echo "It worked";
		else
			echo "It didn't work";
	}
		
	CloseCon($conn);
}

function getSeedRecord($seed){
	$conn = OpenCon();

	$sql = "SELECT username, time FROM seedglobalrecords WHERE seed=" . $seed;
	$result = mysqli_query($conn, $sql);
	
	if (mysqli_num_rows($result) > 0){
		
		$row = mysqli_fetch_assoc($result);
		echo "seed: " . $seed . " username: " . $row["username"] . " time: " . $row["time"];
	}
	else
		echo "It didn't work";
	CloseCon($conn);
}

addGlobalRecord(87634,"jim", 661);
getSeedRecord(87644);
getSeedRecord(87634);

?>

  </body>
</html>